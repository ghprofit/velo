import { PrismaService } from '../prisma/prisma.service';
import { S3Service } from '../s3/s3.service';
import { RecognitionService } from '../recognition/recognition.service';
import { EmailService } from '../email/email.service';
import { CreateContentDto } from './dto/create-content.dto';
import { CreateContentMultipartDto } from './dto/create-content-multipart.dto';
import { GetUploadUrlDto } from './dto/get-upload-url.dto';
import { ConfirmUploadDto } from './dto/confirm-upload.dto';
export declare class ContentService {
    private prisma;
    private s3Service;
    private recognitionService;
    private emailService;
    private readonly logger;
    constructor(prisma: PrismaService, s3Service: S3Service, recognitionService: RecognitionService, emailService: EmailService);
    createContent(userId: string, createContentDto: CreateContentDto): Promise<{
        content: {
            creator: {
                user: {
                    email: string;
                    displayName: string | null;
                    profilePicture: string | null;
                };
            } & {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                displayName: string;
                firstName: string | null;
                lastName: string | null;
                country: string | null;
                bio: string | null;
                profileImage: string | null;
                coverImage: string | null;
                allowBuyerProfileView: boolean;
                verificationStatus: import(".prisma/client").$Enums.VerificationStatus;
                veriffSessionId: string | null;
                veriffDecisionId: string | null;
                verifiedAt: Date | null;
                verificationNotes: string | null;
                dateOfBirth: Date | null;
                bankAccountName: string | null;
                bankName: string | null;
                bankAccountNumber: string | null;
                bankRoutingNumber: string | null;
                bankSwiftCode: string | null;
                bankIban: string | null;
                bankCountry: string | null;
                bankCurrency: string | null;
                payoutSetupCompleted: boolean;
                paypalEmail: string | null;
                stripeAccountId: string | null;
                payoutStatus: import(".prisma/client").$Enums.PayoutStatus;
                policyStrikes: number;
                totalEarnings: number;
                totalViews: number;
                totalPurchases: number;
                pendingBalance: number;
                availableBalance: number;
                waitlistBonus: number;
                bonusWithdrawn: boolean;
                userId: string;
            };
            contentItems: {
                id: string;
                createdAt: Date;
                contentId: string;
                s3Key: string;
                s3Bucket: string;
                fileSize: number;
                order: number;
            }[];
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            status: import(".prisma/client").$Enums.ContentStatus;
            viewCount: number;
            creatorId: string;
            title: string;
            description: string | null;
            price: number;
            thumbnailUrl: string;
            contentType: string;
            s3Key: string;
            s3Bucket: string;
            fileSize: number;
            duration: number | null;
            isPublished: boolean;
            publishedAt: Date | null;
            complianceStatus: import(".prisma/client").$Enums.ComplianceCheckStatus;
            complianceCheckedAt: Date | null;
            complianceNotes: string | null;
            scheduledReviewAt: Date | null;
            rekognitionJobId: string | null;
            rekognitionJobStatus: string | null;
            rekognitionJobStartedAt: Date | null;
            rekognitionJobCompletedAt: Date | null;
            moderationCheckType: string | null;
            purchaseCount: number;
            totalRevenue: number;
        };
        link: string;
        shortId: string;
        status: "PENDING_REVIEW";
    }>;
    createContentMultipart(userId: string, createContentDto: CreateContentMultipartDto, files: Express.Multer.File[], thumbnailFile: Express.Multer.File, filesMetadata: Array<{
        fileName: string;
        contentType: string;
        fileSize: number;
        duration?: number;
    }>): Promise<{
        content: {
            creator: {
                user: {
                    id: string;
                    email: string;
                    displayName: string | null;
                    profilePicture: string | null;
                };
            } & {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                displayName: string;
                firstName: string | null;
                lastName: string | null;
                country: string | null;
                bio: string | null;
                profileImage: string | null;
                coverImage: string | null;
                allowBuyerProfileView: boolean;
                verificationStatus: import(".prisma/client").$Enums.VerificationStatus;
                veriffSessionId: string | null;
                veriffDecisionId: string | null;
                verifiedAt: Date | null;
                verificationNotes: string | null;
                dateOfBirth: Date | null;
                bankAccountName: string | null;
                bankName: string | null;
                bankAccountNumber: string | null;
                bankRoutingNumber: string | null;
                bankSwiftCode: string | null;
                bankIban: string | null;
                bankCountry: string | null;
                bankCurrency: string | null;
                payoutSetupCompleted: boolean;
                paypalEmail: string | null;
                stripeAccountId: string | null;
                payoutStatus: import(".prisma/client").$Enums.PayoutStatus;
                policyStrikes: number;
                totalEarnings: number;
                totalViews: number;
                totalPurchases: number;
                pendingBalance: number;
                availableBalance: number;
                waitlistBonus: number;
                bonusWithdrawn: boolean;
                userId: string;
            };
            contentItems: {
                id: string;
                createdAt: Date;
                contentId: string;
                s3Key: string;
                s3Bucket: string;
                fileSize: number;
                order: number;
            }[];
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            status: import(".prisma/client").$Enums.ContentStatus;
            viewCount: number;
            creatorId: string;
            title: string;
            description: string | null;
            price: number;
            thumbnailUrl: string;
            contentType: string;
            s3Key: string;
            s3Bucket: string;
            fileSize: number;
            duration: number | null;
            isPublished: boolean;
            publishedAt: Date | null;
            complianceStatus: import(".prisma/client").$Enums.ComplianceCheckStatus;
            complianceCheckedAt: Date | null;
            complianceNotes: string | null;
            scheduledReviewAt: Date | null;
            rekognitionJobId: string | null;
            rekognitionJobStatus: string | null;
            rekognitionJobStartedAt: Date | null;
            rekognitionJobCompletedAt: Date | null;
            moderationCheckType: string | null;
            purchaseCount: number;
            totalRevenue: number;
        };
        shortId: string;
        status: "PENDING_REVIEW";
        message: string;
    }>;
    processVideoModerationJobs(): Promise<void>;
    private handleModerationJobComplete;
    private handleModerationJobFailed;
    private sendApprovalEmail;
    getCreatorContent(userId: string): Promise<({
        _count: {
            purchases: number;
        };
        contentItems: {
            id: string;
            createdAt: Date;
            contentId: string;
            s3Key: string;
            s3Bucket: string;
            fileSize: number;
            order: number;
        }[];
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        status: import(".prisma/client").$Enums.ContentStatus;
        viewCount: number;
        creatorId: string;
        title: string;
        description: string | null;
        price: number;
        thumbnailUrl: string;
        contentType: string;
        s3Key: string;
        s3Bucket: string;
        fileSize: number;
        duration: number | null;
        isPublished: boolean;
        publishedAt: Date | null;
        complianceStatus: import(".prisma/client").$Enums.ComplianceCheckStatus;
        complianceCheckedAt: Date | null;
        complianceNotes: string | null;
        scheduledReviewAt: Date | null;
        rekognitionJobId: string | null;
        rekognitionJobStatus: string | null;
        rekognitionJobStartedAt: Date | null;
        rekognitionJobCompletedAt: Date | null;
        moderationCheckType: string | null;
        purchaseCount: number;
        totalRevenue: number;
    })[]>;
    getContentById(contentId: string): Promise<{
        creator: {
            user: {
                displayName: string | null;
                profilePicture: string | null;
            };
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            displayName: string;
            firstName: string | null;
            lastName: string | null;
            country: string | null;
            bio: string | null;
            profileImage: string | null;
            coverImage: string | null;
            allowBuyerProfileView: boolean;
            verificationStatus: import(".prisma/client").$Enums.VerificationStatus;
            veriffSessionId: string | null;
            veriffDecisionId: string | null;
            verifiedAt: Date | null;
            verificationNotes: string | null;
            dateOfBirth: Date | null;
            bankAccountName: string | null;
            bankName: string | null;
            bankAccountNumber: string | null;
            bankRoutingNumber: string | null;
            bankSwiftCode: string | null;
            bankIban: string | null;
            bankCountry: string | null;
            bankCurrency: string | null;
            payoutSetupCompleted: boolean;
            paypalEmail: string | null;
            stripeAccountId: string | null;
            payoutStatus: import(".prisma/client").$Enums.PayoutStatus;
            policyStrikes: number;
            totalEarnings: number;
            totalViews: number;
            totalPurchases: number;
            pendingBalance: number;
            availableBalance: number;
            waitlistBonus: number;
            bonusWithdrawn: boolean;
            userId: string;
        };
        contentItems: {
            id: string;
            createdAt: Date;
            contentId: string;
            s3Key: string;
            s3Bucket: string;
            fileSize: number;
            order: number;
        }[];
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        status: import(".prisma/client").$Enums.ContentStatus;
        viewCount: number;
        creatorId: string;
        title: string;
        description: string | null;
        price: number;
        thumbnailUrl: string;
        contentType: string;
        s3Key: string;
        s3Bucket: string;
        fileSize: number;
        duration: number | null;
        isPublished: boolean;
        publishedAt: Date | null;
        complianceStatus: import(".prisma/client").$Enums.ComplianceCheckStatus;
        complianceCheckedAt: Date | null;
        complianceNotes: string | null;
        scheduledReviewAt: Date | null;
        rekognitionJobId: string | null;
        rekognitionJobStatus: string | null;
        rekognitionJobStartedAt: Date | null;
        rekognitionJobCompletedAt: Date | null;
        moderationCheckType: string | null;
        purchaseCount: number;
        totalRevenue: number;
    }>;
    deleteContent(userId: string, contentId: string): Promise<{
        message: string;
    }>;
    getContentStats(userId: string): Promise<{
        totalContent: number;
        totalViews: number;
        totalPurchases: number;
        totalRevenue: number;
    }>;
    private reviewContentImmediately;
    processScheduledContentReviews(): Promise<{
        processed: number;
        results: never[];
        successful?: undefined;
    } | {
        processed: number;
        successful: number;
        results: ({
            id: string;
            status: string;
            error: string;
            contentId?: undefined;
            complianceStatus?: undefined;
            success?: undefined;
        } | {
            contentId: string;
            status: "PENDING_REVIEW" | "APPROVED";
            complianceStatus: "PASSED" | "MANUAL_REVIEW";
            success: boolean;
            id?: undefined;
            error?: undefined;
        } | {
            contentId: string;
            success: boolean;
            error: string;
            id?: undefined;
            status?: undefined;
            complianceStatus?: undefined;
        })[];
    }>;
    getPresignedUploadUrls(userId: string, dto: GetUploadUrlDto): Promise<{
        contentId: string;
        thumbnailUrl: {
            uploadUrl: string;
            key: string;
        };
        contentUrls: {
            uploadUrl: string;
            key: string;
            index: number;
            originalFileName: string;
        }[];
        metadata: {
            title: string;
            description: string;
            category: string | undefined;
            price: number;
        };
    }>;
    confirmDirectUpload(userId: string, dto: ConfirmUploadDto): Promise<{
        content: {
            creator: {
                user: {
                    email: string;
                    displayName: string | null;
                    profilePicture: string | null;
                };
            } & {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                displayName: string;
                firstName: string | null;
                lastName: string | null;
                country: string | null;
                bio: string | null;
                profileImage: string | null;
                coverImage: string | null;
                allowBuyerProfileView: boolean;
                verificationStatus: import(".prisma/client").$Enums.VerificationStatus;
                veriffSessionId: string | null;
                veriffDecisionId: string | null;
                verifiedAt: Date | null;
                verificationNotes: string | null;
                dateOfBirth: Date | null;
                bankAccountName: string | null;
                bankName: string | null;
                bankAccountNumber: string | null;
                bankRoutingNumber: string | null;
                bankSwiftCode: string | null;
                bankIban: string | null;
                bankCountry: string | null;
                bankCurrency: string | null;
                payoutSetupCompleted: boolean;
                paypalEmail: string | null;
                stripeAccountId: string | null;
                payoutStatus: import(".prisma/client").$Enums.PayoutStatus;
                policyStrikes: number;
                totalEarnings: number;
                totalViews: number;
                totalPurchases: number;
                pendingBalance: number;
                availableBalance: number;
                waitlistBonus: number;
                bonusWithdrawn: boolean;
                userId: string;
            };
            contentItems: {
                id: string;
                createdAt: Date;
                contentId: string;
                s3Key: string;
                s3Bucket: string;
                fileSize: number;
                order: number;
            }[];
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            status: import(".prisma/client").$Enums.ContentStatus;
            viewCount: number;
            creatorId: string;
            title: string;
            description: string | null;
            price: number;
            thumbnailUrl: string;
            contentType: string;
            s3Key: string;
            s3Bucket: string;
            fileSize: number;
            duration: number | null;
            isPublished: boolean;
            publishedAt: Date | null;
            complianceStatus: import(".prisma/client").$Enums.ComplianceCheckStatus;
            complianceCheckedAt: Date | null;
            complianceNotes: string | null;
            scheduledReviewAt: Date | null;
            rekognitionJobId: string | null;
            rekognitionJobStatus: string | null;
            rekognitionJobStartedAt: Date | null;
            rekognitionJobCompletedAt: Date | null;
            moderationCheckType: string | null;
            purchaseCount: number;
            totalRevenue: number;
        };
        link: string;
        shortId: string;
        status: string;
    }>;
}
//# sourceMappingURL=content.service.d.ts.map